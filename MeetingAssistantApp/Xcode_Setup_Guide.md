# دليل إعداد وتشغيل تطبيق مساعد الاجتماعات الذكي

هذا الدليل يشرح كيفية تشغيل التطبيق على جهاز iPhone حقيقي وتفعيل كافة الصلاحيات اللازمة.

## ملاحظة هامة بخصوص ملف IPA
ملفات `IPA` تتطلب توقيعاً رقمياً (Code Signing) مرتبطاً بحساب مطور Apple. للحصول على أفضل تجربة وضمان عمل التطبيق على جهازك، يوصى بفتح المشروع في Xcode وتشغيله مباشرة على هاتفك (Sideloading)، وهي الطريقة الرسمية والآمنة.

## 1. إعدادات ملف Info.plist

يجب إضافة المفاتيح التالية إلى ملف `Info.plist` الخاص بالمشروع. هذه المفاتيح ضرورية لطلب إذن المستخدم للوصول إلى الميكروفون وخدمة التعرف على الكلام.

| المفتاح (Key) | النوع (Type) | القيمة (Value) | الوصف (Description) |
| :--- | :--- | :--- | :--- |
| `Privacy - Speech Recognition Usage Description` | `String` | نحتاج الوصول لخدمة التعرف على الكلام لتحويل صوت الاجتماع إلى نص لحظي. | `NSSpeechRecognitionUsageDescription` |
| `Privacy - Microphone Usage Description` | `String` | نحتاج الوصول للميكروفون للاستماع إلى الاجتماع أو الحصة الدراسية. | `NSMicrophoneUsageDescription` |

**ملاحظة:** يجب أن تكون القيمة (Value) وصفاً واضحاً ومقنعاً للمستخدم، وإلا قد ترفض Apple التطبيق.

## 2. تفعيل الصلاحيات (Capabilities)

يجب تفعيل وضع الخلفية (Background Modes) في إعدادات المشروع (Signing & Capabilities) لتمكين التطبيق من الاستمرار في معالجة الصوت والتعرف على الكلام حتى عندما يكون في الخلفية.

**الخطوات:**

1.  في Xcode، اختر هدف المشروع (Target).
2.  انتقل إلى علامة التبويب **"Signing & Capabilities"**.
3.  انقر على زر **`+ Capability`** وأضف **"Background Modes"**.
4.  ضمن قائمة **"Background Modes"** التي ظهرت، قم بتحديد الخيارات التالية:
    *   **`Audio, AirPlay, and Picture in Picture`**: ضروري لتمكين معالجة الصوت في الخلفية ولعمل خاصية PiP.
    *   **`Voice Processing`**: يوصى به لتحسين جودة الصوت الملتقط للتعرف على الكلام.

## 3. إعداد مفتاح Gemini API

في ملف `GeminiService.swift`، يجب استبدال القيمة النائبة بمفتاح API الحقيقي الخاص بك:

```swift
private let apiKey = "YOUR_GEMINI_API_KEY" // استبدل هذا
```

**توصية:** يفضل تخزين مفاتيح API الحساسة في ملف إعدادات (مثل `xcconfig`) أو باستخدام متغيرات البيئة بدلاً من كتابتها مباشرة في الكود.

## 4. إضافة ملف فيديو وهمي لـ PiP

تتطلب خاصية Picture-in-Picture (PiP) في iOS تشغيل محتوى فيديو. بما أننا نستخدمها لعرض نص، نحتاج إلى حيلة بسيطة:

1.  قم بإنشاء ملف فيديو قصير جداً (مثل ثانية واحدة) بصيغة `.mp4` يكون شاشته سوداء أو شفافة.
2.  قم بتسمية الملف **`blank.mp4`** (أو أي اسم آخر، وتعديل `PiPManager.swift` وفقاً لذلك).
3.  أضف هذا الملف إلى مشروع Xcode وتأكد من تضمينه في حزمة التطبيق (Target Membership).

هذا الملف هو ما سيتم تشغيله في الخلفية لتمكين نافذة PiP من الظهور، بينما سيتم عرض المحتوى النصي الفعلي فوقه.

## 5. التشغيل على iPhone حقيقي
1. قم بتوصيل هاتفك بجهاز Mac.
2. في Xcode، اختر هاتفك من قائمة الأجهزة في الأعلى.
3. انتقل إلى **Signing & Capabilities** واختر حسابك في قسم **Team**.
4. اضغط على زر **Run** (المثلث).
5. في هاتفك، اذهب إلى **Settings > General > VPN & Device Management** وقم بعمل **Trust** لشهادة المطور الخاصة بك.
